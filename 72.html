<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>72æ³•å‰‡å¯¦æ¸¬-ç†è²¡æ–¹æ¡ˆå°æ¯” </title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: 'PingFang TC', 'Microsoft JhengHei', sans-serif; background: #f4f6f9; padding: 20px; }
        .container { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); max-width: 1000px; margin: auto; }
        
        /* è¼¸å…¥å€å¡ç‰‡ä½ˆå±€ */
        .input-card-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px; }
        .card { padding: 15px; border-radius: 10px; border: 1px solid #ddd; background: #fff; }
        .card.plan-a { border-top: 5px solid #34a853; }
        .card.plan-b { border-top: 5px solid #4285f4; }
        .card.plan-c { border-top: 5px solid #fabc05; }
        .card.inflation { border-top: 5px solid #ea4335; background: #fff5f5; }
        
        label { font-size: 0.85rem; font-weight: bold; color: #555; }
        input { width: 100%; padding: 8px; margin: 5px 0; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        
        button { width: 100%; padding: 15px; background: #202124; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 1.1rem; transition: 0.3s; }
        button:hover { background: #444; }

        .chart-container { height: 500px; margin-top: 30px; position: relative; }

        /* çŸ¥è­˜åº«èˆ‡é€£çµæ¨£å¼ */
        .knowledge-base { margin-top: 40px; padding: 25px; background: #f8faff; border: 1px solid #e8f0fe; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }
        .knowledge-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; gap: 10px; }
        .formula-box { background: #1a73e8; color: #fff; text-align: center; padding: 15px; font-size: 1.5rem; font-weight: bold; border-radius: 8px; margin: 20px 0; }
        .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .ref-link { padding: 8px 16px; background-color: #fff; color: #1a73e8; border: 2px solid #1a73e8; border-radius: 20px; text-decoration: none; font-weight: bold; transition: 0.3s; }
        .ref-link:hover { background-color: #1a73e8; color: white; }
        h2, h3, h4 { margin: 0; color: #202124; }
    </style>
</head>
<body>

<div class="container">
    <h1 style="text-align:center;">72æ³•å‰‡å¯¦æ¸¬-ç†è²¡æ–¹æ¡ˆå°æ¯”</h1>
    
    <div class="input-card-grid">
        <div class="card plan-a">
            <h4>æ–¹æ¡ˆ A (å¦‚ï¼šå®šå­˜)</h4>
            <label>å¹´åŒ–åˆ©ç‡ (%)</label>
            <input type="number" id="rateA" value="1.5">
        </div>
        <div class="card plan-b">
            <h4>æ–¹æ¡ˆ B (å¦‚ï¼šETF)</h4>
            <label>å¹´åŒ–åˆ©ç‡ (%)</label>
            <input type="number" id="rateB" value="6">
        </div>
        <div class="card plan-c">
            <h4>æ–¹æ¡ˆ C (å¦‚ï¼šç©æ¥µå‹)</h4>
            <label>å¹´åŒ–åˆ©ç‡ (%)</label>
            <input type="number" id="rateC" value="10">
        </div>
        <div class="card inflation">
            <h4>âš ï¸ é€šè†¨åƒæ•¸</h4>
            <label>å¹´é€šè†¨ç‡ (%)</label>
            <input type="number" id="rateInf" value="3">
            <label>æ¨¡æ“¬å¹´æ•¸</label>
            <input type="number" id="years" value="35">
        </div>
    </div>

    <div style="margin-bottom: 20px;">
        <label>åˆå§‹æœ¬é‡‘ (è¬å…ƒ)ï¼š</label>
        <input type="number" id="principal" value="100" style="width: 200px;">
    </div>

    <button onclick="updateComparisonChart()">å³æ™‚å°æ¯”æ–¹æ¡ˆæ•¸æ“š</button>

    <div class="chart-container">
        <canvas id="compChart"></canvas>
    </div>

    <div class="knowledge-base">
        <div class="knowledge-header">
            <h2>ğŸ“˜ 72 æ³•å‰‡æ·±åº¦è§£æ</h2>
            <a href="https://drive.google.com/file/d/1Lp3iPBmWRkoDQGOWY4qatXjCzYY7YlVe/view?usp=sharing" 
               target="_blank" class="ref-link">ğŸ”— æŸ¥çœ‹è©³ç´°èªªæ˜æ–‡ä»¶</a>
        </div>
        
        <p>72 æ³•å‰‡æ˜¯ç†è²¡ä¸­æœ€ç›´è¦ºçš„ã€Œå¿ƒç®—å·¥å…·ã€ï¼Œèƒ½å¿«é€Ÿä¼°ç®—å‡ºè³‡ç”¢ç¿»å€æ‰€éœ€çš„æ™‚é–“ã€‚åœ–è¡¨ä¸Šçš„<strong>åœ“åœˆæ¨™è¨˜</strong>å³ç‚ºç¿»å€ç™¼ç”Ÿçš„å¹´ä»½ã€‚</p>
        
        <div class="formula-box">ç¿»å€å¹´æ•¸ â‰ˆ 72 Ã· å¹´åŒ–å ±é…¬ç‡ (%)</div>

        <div class="info-grid">
            <div class="info-item">
                <h4>ğŸ¤” ç‚ºä»€éº¼æ˜¯ 72ï¼Ÿ</h4>
                <p>æ•¸å­¸ä¸Šç¿»å€ç²¾ç¢ºå€¼æ˜¯ 69.3ï¼Œä½† 72 æœ‰æ›´å¤šå…¬å› æ•¸ï¼ˆ2, 3, 4, 6, 8, 9, 12ï¼‰ï¼Œæœ€é©åˆæ—¥å¸¸å£ç®—ï¼Œä¸”åˆ©ç‡åœ¨ 6%-10% æ™‚æœ€æº–ç¢ºã€‚</p>
            </div>
            <div class="info-item">
                <h4>ğŸš€ è¤‡åˆ©èˆ‡è¡Œå‹•å»ºè­°</h4>
                <p>1. <strong>è¤‡åˆ©æ˜¯å‰æï¼š</strong> å¿…é ˆæ˜¯ã€Œåˆ©æ»¾åˆ©ã€æ‰æº–ç¢ºã€‚<br>
                   2. <strong>è­¦æƒ•é€šè†¨ï¼š</strong> ç•¶æŠ•è³‡åˆ©ç‡ä½æ–¼é€šè†¨ç‡æ™‚ï¼Œå¯¦è³ªè³¼è²·åŠ›æ­£åœ¨ç¸®æ°´ã€‚</p>
            </div>
        </div>
    </div>
</div>

<script>
    let compChart = null;

    function updateComparisonChart() {
        const p = parseFloat(document.getElementById('principal').value);
        const y = parseInt(document.getElementById('years').value);
        const rates = [
            { id: 'rateA', name: 'æ–¹æ¡ˆ A', color: '#34a853' },
            { id: 'rateB', name: 'æ–¹æ¡ˆ B', color: '#4285f4' },
            { id: 'rateC', name: 'æ–¹æ¡ˆ C', color: '#fabc05' }
        ];
        const infRate = parseFloat(document.getElementById('rateInf').value) / 100;

        const labels = Array.from({length: y + 1}, (_, i) => `ç¬¬ ${i} å¹´`);
        const datasets = rates.map(r => {
            const rateVal = parseFloat(document.getElementById(r.id).value);
            const doubleYear = rateVal > 0 ? 72 / rateVal : null;
            const data = [];
            const pointRadius = [];
            
            for(let i=0; i<=y; i++) {
                data.push((p * Math.pow(1 + rateVal/100, i)).toFixed(2));
                // æ¨™è¨˜æœ€æ¥è¿‘ç¿»å€å¹´çš„é» (ä¸”è¦åœ¨æ¨¡æ“¬ç¯„åœå…§)
                pointRadius.push(doubleYear && Math.abs(i - doubleYear) < 0.5 && i > 0 ? 8 : 0);
            }
            
            return {
                label: `${r.name} (${rateVal}%)`,
                data: data,
                borderColor: r.color,
                pointBackgroundColor: r.color,
                pointRadius: pointRadius,
                tension: 0.3,
                fill: false
            };
        });

        const infData = labels.map((_, i) => (p * Math.pow(1 - infRate, i)).toFixed(2));
        datasets.push({
            label: `è³¼è²·åŠ›è²¶å€¼ (${(infRate*100).toFixed(1)}%)`,
            data: infData,
            borderColor: '#ea4335',
            borderDash: [5, 5],
            pointRadius: 0,
            fill: false
        });

        const ctx = document.getElementById('compChart').getContext('2d');
        if (compChart) compChart.destroy();
        compChart = new Chart(ctx, {
            type: 'line',
            data: { labels, datasets },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: { mode: 'index', intersect: false },
                plugins: {
                    tooltip: {
                        callbacks: { label: (ctx) => `${ctx.dataset.label}: ${ctx.raw} è¬` }
                    }
                },
                scales: { y: { title: { display: true, text: 'é‡‘é¡ (è¬å…ƒ)' } } }
            }
        });
    }
    window.onload = updateComparisonChart;
</script>
</body>
</html>

<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>é¦¬å¹´ Â· å¥½é‹å•Ÿå‹•å°ï¼ˆDemoï¼‰</title>

  <!-- Optional: nicer fonts (works when online). If offline, it will fall back gracefully. -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500&family=Noto+Serif+TC:wght@600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Minimal Chinese New Year palette */
      --bg:#121212;
      --bg2:#1A1A1A;
      --red:#8C1D18;      /* èƒ­è„‚ç´…ï¼ˆéœ§é¢ï¼‰ */
      --red2:#6E1B17;     /* æ£—ç´…ï¼ˆåæš—ï¼‰ */
      --gold:#C9A24D;     /* éœ§é‡‘ */
      --ivory:#F5EFE6;    /* ç±³ç™½ */
      --muted:rgba(245,239,230,.75);
      --line:rgba(245,239,230,.18);
      --shadow:0 18px 50px rgba(0,0,0,.45);
      --radius:18px;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      background:
        radial-gradient(1200px 700px at 50% 12%, rgba(140,29,24,.18), transparent 55%),
        radial-gradient(900px 600px at 50% 88%, rgba(201,162,77,.10), transparent 55%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      color:var(--ivory);
      font-family:"Noto Sans TC", system-ui, -apple-system, "PingFang TC", "Microsoft JhengHei", sans-serif;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
    }

    .frame{
      width:min(430px, 100%);
      background:rgba(18,18,18,.75);
      border:1px solid rgba(245,239,230,.10);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
      position:relative;
    }

    /* subtle â€œpaper grainâ€ */
    .frame::before{
      content:"";
      position:absolute;
      inset:0;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='120' height='120'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='120' height='120' filter='url(%23n)' opacity='.10'/%3E%3C/svg%3E");
      opacity:.28;
      pointer-events:none;
      mix-blend-mode:overlay;
    }

    .header{
      padding:18px 18px 10px;
      position:relative;
      z-index:1;
    }
    .kicker{
      letter-spacing:.24em;
      text-transform:uppercase;
      color:rgba(201,162,77,.85);
      font-size:12px;
      margin-bottom:6px;
    }
    .title{
      font-family:"Noto Serif TC", "Noto Sans TC", serif;
      font-weight:700;
      font-size:26px;
      line-height:1.2;
      margin:0 0 6px;
    }
    .subtitle{
      margin:0;
      color:var(--muted);
      font-size:14px;
      line-height:1.6;
    }

    .divider{
      height:1px;
      background:linear-gradient(90deg, transparent, var(--line), transparent);
      margin:14px 0 0;
    }

    .content{
      padding:16px 18px 18px;
      position:relative;
      z-index:1;
    }

    .panel{
      border:1px solid rgba(245,239,230,.12);
      border-radius:16px;
      padding:14px;
      background:rgba(26,26,26,.55);
    }

    label{
      display:block;
      font-size:12px;
      color:rgba(245,239,230,.70);
      margin:2px 0 8px;
      letter-spacing:.06em;
    }
    .input{
      width:100%;
      border:1px solid rgba(245,239,230,.16);
      background:rgba(245,239,230,.06);
      color:var(--ivory);
      padding:12px 12px;
      border-radius:14px;
      outline:none;
      font-size:16px;
    }
    .input:focus{
      border-color:rgba(201,162,77,.55);
      box-shadow:0 0 0 4px rgba(201,162,77,.10);
    }
    .row{
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
      margin-top:12px;
    }

    .stepper{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border:1px solid rgba(245,239,230,.16);
      background:rgba(245,239,230,.06);
      border-radius:14px;
      width:100%;
      justify-content:space-between;
    }
    .stepper .btn{
      width:40px;height:40px;
      border-radius:12px;
      border:1px solid rgba(245,239,230,.16);
      background:rgba(18,18,18,.35);
      color:var(--ivory);
      font-size:18px;
      cursor:pointer;
    }
    .stepper .btn:active{ transform:translateY(1px); }
    .stepper .value{
      font-family:"Noto Serif TC", serif;
      font-weight:700;
      font-size:18px;
      letter-spacing:.08em;
      color:rgba(245,239,230,.92);
    }

    .cta{
      margin-top:14px;
      width:100%;
      height:52px;
      border:none;
      border-radius:16px;
      color:var(--ivory);
      cursor:pointer;
      font-size:16px;
      letter-spacing:.08em;
      background:
        linear-gradient(180deg, rgba(201,162,77,.18), rgba(201,162,77,.04)),
        linear-gradient(180deg, var(--red), var(--red2));
      box-shadow:0 10px 28px rgba(140,29,24,.35);
      position:relative;
      overflow:hidden;
    }
    .cta::after{
      content:"";
      position:absolute;
      inset:-40%;
      background:radial-gradient(circle at 30% 30%, rgba(245,239,230,.18), transparent 55%);
      transform:translateX(-18%);
      transition:transform .6s ease;
    }
    .cta:hover::after{ transform:translateX(6%); }
    .cta:disabled{
      cursor:not-allowed;
      opacity:.55;
      box-shadow:none;
    }

    .hint{
      margin-top:10px;
      font-size:12px;
      color:rgba(245,239,230,.58);
      text-align:center;
    }

    /* Screens */
    .screen{ display:none; }
    .screen.active{ display:block; }

    /* Spin screen */
    .spinWrap{
      display:flex;
      flex-direction:column;
      align-items:center;
      gap:12px;
      padding:18px 8px;
    }
    .seal{
      width:86px;height:86px;
      border-radius:22px;
      border:1px solid rgba(201,162,77,.55);
      background:
        radial-gradient(circle at 50% 40%, rgba(201,162,77,.28), transparent 60%),
        linear-gradient(180deg, rgba(140,29,24,.55), rgba(110,27,23,.55));
      box-shadow:0 14px 40px rgba(0,0,0,.5);
      position:relative;
      display:grid;
      place-items:center;
      transform-origin:50% 50%;
      animation:spin 1.2s linear infinite;
    }
    .seal::before{
      content:"é¦¬";
      font-family:"Noto Serif TC", serif;
      font-weight:700;
      font-size:34px;
      color:rgba(245,239,230,.92);
      letter-spacing:.06em;
    }
    .scanLine{
      width:100%;
      height:1px;
      background:linear-gradient(90deg, transparent, rgba(201,162,77,.55), transparent);
      opacity:.65;
      position:relative;
      overflow:hidden;
      border-radius:999px;
      margin-top:2px;
    }
    .scanLine::after{
      content:"";
      position:absolute;
      top:-1px; left:-30%;
      width:30%; height:3px;
      background:linear-gradient(90deg, transparent, rgba(245,239,230,.35), transparent);
      animation:scan 1.4s ease-in-out infinite;
      opacity:.9;
    }
    .spinTitle{
      font-family:"Noto Serif TC", serif;
      font-weight:700;
      font-size:18px;
      margin:0;
    }
    .spinText{
      margin:0;
      color:var(--muted);
      font-size:13px;
      line-height:1.6;
      text-align:center;
      max-width:30ch;
    }

    /* Result screen */
    .resultCard{
      border:1px solid rgba(245,239,230,.12);
      border-radius:18px;
      background:
        radial-gradient(900px 450px at 50% 0%, rgba(140,29,24,.18), transparent 60%),
        rgba(26,26,26,.55);
      padding:16px;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid rgba(201,162,77,.35);
      color:rgba(201,162,77,.95);
      font-size:12px;
      letter-spacing:.08em;
    }
    .bigName{
      margin:12px 0 6px;
      font-family:"Noto Serif TC", serif;
      font-weight:700;
      font-size:26px;
      letter-spacing:.04em;
      line-height:1.25;
    }
    .gift{
      margin:10px 0 0;
      padding:12px;
      border-radius:16px;
      border:1px solid rgba(245,239,230,.12);
      background:rgba(245,239,230,.04);
    }
    .gift .label{
      font-size:12px;
      color:rgba(245,239,230,.70);
      letter-spacing:.08em;
      margin-bottom:6px;
    }
    .gift .value{
      font-size:16px;
      font-weight:600;
      color:rgba(245,239,230,.92);
      line-height:1.4;
    }
    .quote{
      margin-top:12px;
      padding:12px 12px;
      border-left:3px solid rgba(201,162,77,.55);
      background:rgba(18,18,18,.22);
      border-radius:14px;
      color:rgba(245,239,230,.85);
      line-height:1.8;
      font-size:14px;
    }
    .quote small{
      display:block;
      margin-top:6px;
      color:rgba(245,239,230,.55);
      font-size:12px;
    }

    .actions{
      display:flex;
      gap:10px;
      margin-top:14px;
    }
    .ghost{
      flex:1;
      height:46px;
      border-radius:16px;
      border:1px solid rgba(245,239,230,.16);
      background:rgba(245,239,230,.04);
      color:rgba(245,239,230,.86);
      cursor:pointer;
      letter-spacing:.08em;
    }
    .primarySmall{
      flex:1;
      height:46px;
      border-radius:16px;
      border:none;
      cursor:pointer;
      color:var(--ivory);
      background:linear-gradient(180deg, var(--red), var(--red2));
      box-shadow:0 10px 24px rgba(140,29,24,.30);
      letter-spacing:.08em;
    }

    .footerNote{
      margin-top:10px;
      text-align:center;
      font-size:12px;
      color:rgba(245,239,230,.55);
      line-height:1.6;
    }

    @keyframes spin{
      from{ transform:rotate(0deg); }
      to{ transform:rotate(360deg); }
    }
    @keyframes scan{
      0%{ left:-30%; }
      50%{ left:50%; }
      100%{ left:110%; }
    }

    /* reduced motion */
    @media (prefers-reduced-motion: reduce){
      .seal{ animation:none; }
      .scanLine::after{ animation:none; }
      .cta::after{ transition:none; }
    }
  </style>
</head>

<body>
  <main class="frame" role="main">
    <header class="header">
      <div class="kicker">æ–°å¹´ Â· ç¥ç¦ç”Ÿæˆ</div>
      <h1 class="title">é¦¬å¹´ Â· å¥½é‹å•Ÿå‹•å°</h1>
      <p class="subtitle">è«‹ç•™ä¸‹åå­—ï¼Œè®“æ–°å¹´çš„ç¥ç¦æ‰¾åˆ°ä½ ã€‚</p>
      <div class="divider"></div>
    </header>

    <section class="content">
      <!-- Screen 1: Input -->
      <div id="screenInput" class="screen active">
        <div class="panel">
          <label for="nameInput">ä½ çš„åå­—ï¼ˆåƒé¡Œå­—ä¸€æ¨£ï¼‰</label>
          <input id="nameInput" class="input" inputmode="text" maxlength="12" placeholder="ä¾‹å¦‚ï¼šå°å®‰ / å®¶è±ª / é˜¿å¬¤" />

          <div class="row" style="margin-top:14px;">
            <div style="width:100%;">
              <label>å¥½é‹ä»½é‡ï¼ˆä»Šå¹´æƒ³æ¥ä½çš„å¸Œæœ›ï¼‰</label>
              <div class="stepper" aria-label="å¥½é‹ä»½é‡">
                <button id="minusBtn" class="btn" type="button" aria-label="æ¸›å°‘">âˆ’</button>
                <div id="amountValue" class="value" aria-live="polite">1</div>
                <button id="plusBtn" class="btn" type="button" aria-label="å¢åŠ ">ï¼‹</button>
              </div>
            </div>
          </div>

          <button id="startBtn" class="cta" type="button">å•Ÿå‹•å¥½é‹</button>
          <div class="hint">ç„¡éœ€ææ¬¾ï½œç´„ 10 ç§’å®Œæˆ</div>
        </div>
      </div>

      <!-- Screen 2: Spin -->
      <div id="screenSpin" class="screen" aria-live="polite">
        <div class="panel spinWrap">
          <div class="seal" aria-hidden="true"></div>
          <div class="scanLine" aria-hidden="true"></div>
          <h2 class="spinTitle">ç¥ç¦ç”Ÿæˆä¸­</h2>
          <p class="spinText" id="spinText">é¦¬è¹„è²èµ·ï¼Œé¡˜ä½ æ­¥æ­¥å‘å‰ã€‚</p>
        </div>
        <div class="footerNote">è«‹ç¨å€™ï¼Œç¥ç¦æ­£åœ¨åŒ¯èšã€‚</div>
      </div>

      <!-- Screen 3: Result -->
      <div id="screenResult" class="screen">
        <div class="resultCard">
          <div class="badge">ç¥ç¦å·²ç”Ÿæˆ</div>
          <div id="nameLine" class="bigName">â€”</div>

          <div class="gift">
            <div class="label">ğŸ å¥½é‹å…¥æ‰‹</div>
            <div id="giftLine" class="value">â€”</div>
          </div>

          <div class="quote" id="quoteBox">
            ã€Œâ€”ã€
            <small id="quoteAuthor">â€”</small>
          </div>

          <div class="actions">
            <button id="copyBtn" class="ghost" type="button">è¤‡è£½çµæœæ–‡å­—</button>
            <button id="resetBtn" class="primarySmall" type="button">ä¸‹ä¸€ä½å•Ÿå‹•</button>
          </div>

          <div class="footerNote">ç¥ç¦å·²å®Œæˆç”Ÿæˆï¼Œè«‹é ˜å–ä½ çš„ç´…åŒ…ç¥ç¦ã€‚</div>
        </div>
      </div>
    </section>
  </main>

  <script>
    // ===== Config =====
    const REWARDS = [
      { amount: 500, label: "500 å…ƒã€Œå¸Œæœ›ç„¡çª®ã€åˆ®åˆ®æ¨‚" },
      { amount: 200, label: "200 å…ƒã€Œå¸Œæœ›ç„¡çª®ã€åˆ®åˆ®æ¨‚" }
    ];

    // Use short, warm, non-controversial lines (no political/religious content).
    // If you want â€œåäººâ€ attribution, replace author with a real verified name you prefer.
    // Here we keep it safe and generic: â€œæ–°å¹´ç®´è¨€â€.
    const QUOTES = [
      { text: "ä¸€æ­¥ä¸€æ­¥èµ°ï¼Œå¥½é‹å°±åœ¨è·¯ä¸Šã€‚", author: "æ–°å¹´ç®´è¨€" },
      { text: "å¿ƒå®šäº†ï¼Œè·¯å°±äº®äº†ã€‚", author: "æ–°å¹´ç®´è¨€" },
      { text: "æ–°çš„ä¸€å¹´ï¼Œé¡˜åŠªåŠ›éƒ½æœ‰å›æ‡‰ã€‚", author: "æ–°å¹´ç®´è¨€" },
      { text: "è¡Œå‹•ï¼Œå°±æ˜¯æœ€å¥½çš„ç¥ç¦ã€‚", author: "æ–°å¹´ç®´è¨€" },
      { text: "æ…¢æ…¢ä¾†ï¼Œä¹Ÿæ˜¯ä¸€ç¨®å‰é€²ã€‚", author: "æ–°å¹´ç®´è¨€" },
      { text: "é¡˜ä½ æ‰€èµ°çš„æ¯ä¸€æ­¥ï¼Œéƒ½é è¿‘å¿ƒä¹‹æ‰€å‘ã€‚", author: "æ–°å¹´ç®´è¨€" },
      { text: "æŠŠå¸Œæœ›ç•™åœ¨å¿ƒè£¡ï¼Œå¥½é‹è‡ªç„¶æœƒä¾†ã€‚", author: "æ–°å¹´ç®´è¨€" },
      { text: "æ–°å¹´ä¸æ˜¯é‡ä¾†ï¼Œè€Œæ˜¯æ›´é è¿‘ã€‚", author: "æ–°å¹´ç®´è¨€" },
      { text: "é¡˜å–„æ„æˆç‚ºä½ æœ€é•·ä¹…çš„é‹æ°£ã€‚", author: "æ–°å¹´ç®´è¨€" },
      { text: "é¡˜ä»Šå¤©çš„æœŸå¾…ï¼Œæˆç‚ºæ˜å¤©çš„æ”¶ç©«ã€‚", author: "æ–°å¹´ç®´è¨€" }
    ];

    // ===== State =====
    let amount = 1;
    let currentName = "";
    let currentReward = null;
    let currentQuote = null;

    // ===== DOM =====
    const screenInput  = document.getElementById("screenInput");
    const screenSpin   = document.getElementById("screenSpin");
    const screenResult = document.getElementById("screenResult");

    const nameInput = document.getElementById("nameInput");
    const amountValue = document.getElementById("amountValue");
    const minusBtn = document.getElementById("minusBtn");
    const plusBtn = document.getElementById("plusBtn");
    const startBtn = document.getElementById("startBtn");

    const nameLine = document.getElementById("nameLine");
    const giftLine = document.getElementById("giftLine");
    const quoteBox = document.getElementById("quoteBox");
    const quoteAuthor = document.getElementById("quoteAuthor");

    const resetBtn = document.getElementById("resetBtn");
    const copyBtn = document.getElementById("copyBtn");

    const spinText = document.getElementById("spinText");

    // ===== Helpers =====
    function show(screen){
      [screenInput, screenSpin, screenResult].forEach(s => s.classList.remove("active"));
      screen.classList.add("active");
    }

    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    function pick(arr){
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function normalizeName(raw){
      const n = (raw || "").trim();
      // Keep it friendly; allow Chinese/letters/numbers/spaces
      return n.replace(/\s+/g, " ");
    }

    function setAmount(next){
      amount = clamp(next, 1, 9);
      amountValue.textContent = String(amount);
    }

    function validate(){
      const n = normalizeName(nameInput.value);
      startBtn.disabled = n.length === 0;
    }

    function renderResult(){
      const displayName = currentName.length ? currentName : "ä½ ";
      nameLine.textContent = `${displayName} çš„æ–°å¹´å¥½é‹`;

      giftLine.textContent = `å¥½é‹å…¥æ‰‹ï¼š${currentReward.label}`;

      // Quote box with Chinese-style quotes
      quoteBox.firstChild && (quoteBox.firstChild.textContent = `ã€Œ${currentQuote.text}ã€`);
      quoteAuthor.textContent = `â€” ${currentQuote.author}`;
    }

    function buildShareText(){
      const displayName = currentName.length ? currentName : "æˆ‘";
      return [
        "ã€é¦¬å¹´ Â· å¥½é‹å•Ÿå‹•å°ã€‘",
        `${displayName} çš„æ–°å¹´å¥½é‹å·²ç”Ÿæˆ`,
        `ğŸ ${currentReward.label}`,
        `ã€Œ${currentQuote.text}ã€â€” ${currentQuote.author}`
      ].join("\n");
    }

    // ===== Events =====
    minusBtn.addEventListener("click", () => setAmount(amount - 1));
    plusBtn.addEventListener("click", () => setAmount(amount + 1));

    nameInput.addEventListener("input", validate);
    nameInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !startBtn.disabled) startBtn.click();
    });

    startBtn.addEventListener("click", () => {
      currentName = normalizeName(nameInput.value);
      if (!currentName) return;

      // pick reward + quote
      currentReward = pick(REWARDS);
      currentQuote = pick(QUOTES);

      // Optional: small personalized spin line
      spinText.textContent = `${currentName}ï¼Œé¦¬è¹„è²èµ·ï¼Œé¡˜ä½ æ­¥æ­¥å‘å‰ã€‚`;

      // Go spin
      show(screenSpin);

      // Simulate 9â€“11s â€œç”Ÿæˆâ€
      const ms = 9000 + Math.floor(Math.random() * 2000);

      window.setTimeout(() => {
        renderResult();
        show(screenResult);
      }, ms);
    });

    resetBtn.addEventListener("click", () => {
      // reset
      currentName = "";
      currentReward = null;
      currentQuote = null;
      nameInput.value = "";
      setAmount(1);
      validate();
      show(screenInput);
      nameInput.focus();
    });

    copyBtn.addEventListener("click", async () => {
      const text = buildShareText();
      try{
        await navigator.clipboard.writeText(text);
        copyBtn.textContent = "å·²è¤‡è£½ âœ”";
        window.setTimeout(() => (copyBtn.textContent = "è¤‡è£½çµæœæ–‡å­—"), 1200);
      }catch(err){
        // Fallback: prompt
        window.prompt("è¤‡è£½ä»¥ä¸‹æ–‡å­—ï¼š", text);
      }
    });

    // Init
    setAmount(1);
    validate();
    nameInput.focus();
  </script>
</body>
</html>
